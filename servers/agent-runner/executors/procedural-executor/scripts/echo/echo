#!/bin/bash
# Echo script - accepts --message parameter and echoes it back as JSON
#
# This is a minimal test script for the procedural executor.
# It only accepts the --message parameter to demonstrate strict parameter matching.
#
# Usage: ./echo --message "hello world"
# Output: {"message": "hello world"}
#
# Exit codes:
#   0 - Success
#   1 - Missing or invalid --message parameter

message=""

while [[ $# -gt 0 ]]; do
  case $1 in
    --message)
      message="$2"
      shift 2
      ;;
    *)
      echo "Error: Unknown parameter: $1" >&2
      exit 1
      ;;
  esac
done

if [[ -z "$message" ]]; then
  echo "Error: --message parameter is required" >&2
  exit 1
fi

# Output as JSON
echo "{\"message\": \"$message\"}"
