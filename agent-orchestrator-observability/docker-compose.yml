services:
  backend:
    build:
      context: .
      dockerfile: docker/backend.Dockerfile
    container_name: agent-orchestrator-observability-backend
    ports:
      - "8765:8765"
    volumes:
      - ./backend:/app/backend
      # Database persistence disabled - starts fresh on each container creation
      # - observability-data:/app/.agent-orchestrator
    environment:
      - PYTHONUNBUFFERED=1
      # Enable verbose debug logging for troubleshooting (set to true to enable)
      - DEBUG_LOGGING=false
    networks:
      - observability-network
    restart: unless-stopped

  frontend:
    build:
      context: .
      dockerfile: docker/frontend.Dockerfile
    container_name: agent-orchestrator-observability-frontend
    ports:
      - "5173:5173"
    volumes:
      - ./frontend/src:/app/src
      - ./frontend/index.html:/app/index.html
    environment:
      # Backend URL for API and WebSocket connections (defaults to http://localhost:8765)
      - VITE_BACKEND_URL=http://localhost:8765
    networks:
      - observability-network
    depends_on:
      - backend
    restart: unless-stopped

networks:
  observability-network:
    driver: bridge

# Volumes commented out - database starts fresh on each container creation
# volumes:
#   observability-data:
#     driver: local
